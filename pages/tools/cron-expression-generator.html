<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1FYJ98BTXG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1FYJ98BTXG');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2031642574589224"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="canonical" href="https://wagleus.com/pages/tools/text-manipulation.html" />
    <title>Free Text Case Converter Tool | WUS</title>
    <meta name="description" content="Transform text to UPPERCASE, lowercase, Title Case, or remove spaces with our free online text converter tool. Perfect for writers, developers, and content creators.">
    <meta name="keywords" content="text case converter, text transformer, case changer, uppercase converter, lowercase converter, title case generator, text manipulation tool, remove extra spaces, text tools, free text converter">
    <meta name="author" content="Wagle Universal Solutions">
    <meta name="robots" content="index, follow">
    <meta name="google-adsense-account" content="ca-pub-2031642574589224">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://wagleus.com/pages/tools/text-manipulation.html">
    <meta property="og:title" content="Free Text Manipulation Tool - Case Converter & Text Transformer">
    <meta property="og:description" content="Transform your text instantly with our free online text tools. Convert case, reverse text, remove spaces and more.">
    <meta property="og:image" content="/assets/img/logo.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://wagleus.com/pages/tools/text-manipulation.html">
    <meta property="twitter:title" content="Free Text Manipulation Tool">
    <meta property="twitter:description" content="Transform your text instantly with our free online text tools.">
    <meta property="twitter:image" content="/assets/img/logo.png">

    <!-- Enhanced Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Text Manipulation Tool",
        "applicationCategory": "UtilityApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "description": "Free online text manipulation tool for converting text case, reversing text, and removing extra spaces.",
        "browserRequirements": "Requires JavaScript",
        "softwareVersion": "1.0",
        "creator": {
            "@type": "Organization",
            "name": "Wagle Universal Solutions",
            "alternateName":["WUS","Wagle","Wagleus"],
            "url": "https://wagleus.com"
        }
    }
    </script>

    <!-- Favicon -->
    <link href="/assets/img/favicon.png" rel="icon">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap" rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="/assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="/assets/vendor/animate.css/animate.min.css" rel="stylesheet">
    <link href="/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Main CSS File -->
    <link href="/assets/css/main.css" rel="stylesheet">
    <link href="/assets/css/style.css" rel="stylesheet">

    <style>
        /* Page-specific styles only */
        .result {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
        }
        .btn-outline-primary {
            padding: 0.375rem 0.75rem;
        }
    </style>
</head>
<body>
   <!-- Header -->
   <header id="header" class="header fixed-top">
    <div class="container-fluid d-flex align-items-center justify-content-between">
        <a href="/pages/tools/tools.html" class="logo">
            <img src="/assets/img/logo.png" alt="WUS LOGO">
        </a>
        <nav id="navbar" class="navbar">
            <ul>
                <li><a href="/pages/tools/tools.html" class="active">All Tools</a></li>
                <li class="dropdown">
                    <a href="#"><span>Tools Menu</span> <i class="bi bi-chevron-down"></i></a>
                    <ul>
                        <li><a href="/pages/tools/text-manipulation.html">Text Manipulation</a></li>
                        <li><a href="/pages/tools/bulk-image-resizer.html">Bulk Image Resizer</a></li>
                        <li><a href="/pages/tools/json-formatter.html">JSON Formatter</a></li>
                        <li><a href="/pages/tools/password-generator.html">Password Generator</a></li>
                        <li><a href="/pages/tools/number-converter.html">Number Converter</a></li>
                        <li><a href="/pages/tools/base64encoder-decoder.html">Base64 Encoder</a></li>
                        <li><a href="/pages/tools/hash-generator.html">Hash Generator</a></li>
                        <li><a href="/pages/tools/color-picker.html">Color Theory</a></li>
                    </ul>
                </li>
                <li><a href="/index.html"><i class="bi bi-house-door"></i> Home</a></li>
            </ul>
            <i class="bi bi-list mobile-nav-toggle"></i>
        </nav>
    </div>
</header>
<!-- Add backdrop div after header -->
<div class="nav-backdrop"></div>
<!-- Wrap content in main tag -->
<main>
    <div class="tool-container">
        <h1 class="text-center mb-4">Schedule Builder</h1>
        <p class="tool-description text-center">Create a schedule for your tasks without writing complex expressions. Just select when you want your task to run!</p>

        <!-- Simple Schedule Builder -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">When should your task run?</h5>
            </div>
            <div class="card-body">
                <!-- Frequency Selection -->
                <div class="mb-4">
                    <label class="form-label fw-bold">How often?</label>
                    <select class="form-select form-select-lg mb-3" id="frequencySelect">
                        <option value="minutely">Every few minutes</option>
                        <option value="hourly">Every few hours</option>
                        <option value="daily">Daily</option>
                        <option value="weekly">Weekly</option>
                        <option value="monthly">Monthly</option>
                    </select>
                </div>

                <!-- Dynamic Options based on Frequency -->
                <div id="minutelyOptions" class="schedule-options">
                    <label class="form-label">Run every:</label>
                    <select class="form-select mb-3" id="minuteInterval">
                        <option value="1">1 minute</option>
                        <option value="5">5 minutes</option>
                        <option value="10">10 minutes</option>
                        <option value="15">15 minutes</option>
                        <option value="30">30 minutes</option>
                    </select>
                </div>

                <div id="hourlyOptions" class="schedule-options d-none">
                    <label class="form-label">Run every:</label>
                    <select class="form-select mb-3" id="hourInterval">
                        <option value="1">1 hour</option>
                        <option value="2">2 hours</option>
                        <option value="3">3 hours</option>
                        <option value="4">4 hours</option>
                        <option value="6">6 hours</option>
                        <option value="12">12 hours</option>
                    </select>
                </div>

                <div id="dailyOptions" class="schedule-options d-none">
                    <label class="form-label">Run at what time?</label>
                    <select class="form-select mb-3" id="dailyTime">
                        <option value="0">12:00 AM (Midnight)</option>
                        <option value="6">6:00 AM</option>
                        <option value="9">9:00 AM</option>
                        <option value="12">12:00 PM (Noon)</option>
                        <option value="15">3:00 PM</option>
                        <option value="18">6:00 PM</option>
                        <option value="21">9:00 PM</option>
                    </select>
                </div>

                <div id="weeklyOptions" class="schedule-options d-none">
                    <label class="form-label">Which days of the week?</label>
                    <div class="btn-group d-flex flex-wrap gap-2 mb-3" role="group">
                        <input type="checkbox" class="btn-check" id="weekday0" autocomplete="off">
                        <label class="btn btn-outline-primary" for="weekday0">Sunday</label>
                        <input type="checkbox" class="btn-check" id="weekday1" autocomplete="off">
                        <label class="btn btn-outline-primary" for="weekday1">Monday</label>
                        <input type="checkbox" class="btn-check" id="weekday2" autocomplete="off">
                        <label class="btn btn-outline-primary" for="weekday2">Tuesday</label>
                        <input type="checkbox" class="btn-check" id="weekday3" autocomplete="off">
                        <label class="btn btn-outline-primary" for="weekday3">Wednesday</label>
                        <input type="checkbox" class="btn-check" id="weekday4" autocomplete="off">
                        <label class="btn btn-outline-primary" for="weekday4">Thursday</label>
                        <input type="checkbox" class="btn-check" id="weekday5" autocomplete="off">
                        <label class="btn btn-outline-primary" for="weekday5">Friday</label>
                        <input type="checkbox" class="btn-check" id="weekday6" autocomplete="off">
                        <label class="btn btn-outline-primary" for="weekday6">Saturday</label>
                    </div>
                    <label class="form-label">At what time?</label>
                    <select class="form-select mb-3" id="weeklyTime">
                        <option value="0">12:00 AM (Midnight)</option>
                        <option value="9">9:00 AM</option>
                        <option value="12">12:00 PM (Noon)</option>
                        <option value="18">6:00 PM</option>
                    </select>
                </div>

                <div id="monthlyOptions" class="schedule-options d-none">
                    <label class="form-label">Which day of the month?</label>
                    <select class="form-select mb-3" id="monthlyDay">
                        <option value="1">1st day</option>
                        <option value="15">15th day</option>
                        <option value="L">Last day</option>
                    </select>
                    <label class="form-label">At what time?</label>
                    <select class="form-select mb-3" id="monthlyTime">
                        <option value="0">12:00 AM (Midnight)</option>
                        <option value="9">9:00 AM</option>
                        <option value="12">12:00 PM (Noon)</option>
                        <option value="18">6:00 PM</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Expression Validator -->
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Understand Your Cron Expression</h5>
                <button class="btn btn-primary btn-sm" id="copyBtn">
                    <i class="bi bi-clipboard"></i> Copy
                </button>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label">Cron Expression:</label>
                    <div class="input-group">
                        <input type="text" class="form-control font-monospace" id="validateExpression" 
                               placeholder="e.g. 0 0 * * 1-5" spellcheck="false">
                    </div>
                    <div class="form-text">
                        <i class="bi bi-info-circle"></i> Format: minute hour day-of-month month day-of-week
                    </div>
                </div>

                <div id="expressionDetails">
                    <div class="alert alert-primary">
                        <h6 class="mb-2"><i class="bi bi-translate"></i> Plain English:</h6>
                        <p id="decodedDescription" class="mb-0"></p>
                    </div>
                    
                    <div class="mt-3">
                        <h6 class="mb-2"><i class="bi bi-clock"></i> Next 5 Run Times:</h6>
                        <ul id="decodedOccurrences" class="list-unstyled"></ul>
                    </div>

                    <div class="mt-3">
                        <h6 class="mb-2"><i class="bi bi-gear"></i> Expression Breakdown:</h6>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Field</th>
                                        <th>Value</th>
                                        <th>Meaning</th>
                                    </tr>
                                </thead>
                                <tbody id="expressionBreakdown">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div id="validationError" class="alert alert-danger d-none">
                    <i class="bi bi-exclamation-triangle"></i> Invalid cron expression. Please check the format.
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Add Footer -->
<footer id="footer" class="footer dark-background">
    <div class="container text-center">
        <h3 class="sitename">Wagle Universal Solutions</h3>
        <p>Contact us today to learn how we can help you achieve your goals.</p>
        <div class="social-links d-flex justify-content-center">
            <a href="https://www.facebook.com/profile.php?id=61558961715001" target="_blank" class="facebook"><i class="bi bi-facebook"></i></a>
            <a href="https://x.com/wagleus" class="twitter-x" target="_blank" ><i class="bi bi-twitter-x"></i></a>
            <a href="https://www.linkedin.com/company/wagle-universal-solutions/ " target="_blank"class="linkedin"><i class="bi bi-linkedin"></i></a>
        </div>
        <div class="copyright mt-4">
            <span>Copyright</span> <strong class="px-1 sitename">WUS</strong> <span>All Rights Reserved</span>
            <div class="mt-2">
                <a href="../terms-of-service.html" class="text-white">Terms of Service</a>
            </div>
        </div>
        <div class="credits">
            Designed by <a>WUS</a> | <a href="/pages/privacy.html">Privacy Policy</a>
        </div>
    </div>
</footer>

<!-- Scroll Top -->
<a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
    <i class="bi bi-arrow-up-short"></i>
</a>

<!-- Vendor JS Files -->
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/aos/aos.js"></script>
<script src="/assets/vendor/glightbox/js/glightbox.min.js"></script>
<script src="/assets/vendor/swiper/swiper-bundle.min.js"></script>

<!-- Main JS File -->
<script src="/assets/js/index.js"></script>
<script src="/assets/js/main.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const frequencySelect = document.getElementById('frequencySelect');
    const validateExpression = document.getElementById('validateExpression');
    const copyBtn = document.getElementById('copyBtn');

    // Event listeners for UI controls
    frequencySelect.addEventListener('change', function() {
        document.querySelectorAll('.schedule-options').forEach(el => el.classList.add('d-none'));
        document.getElementById(`${this.value}Options`).classList.remove('d-none');
        updateSchedule();
    });

    document.querySelectorAll('select, input[type="checkbox"]').forEach(el => {
        el.addEventListener('change', updateSchedule);
    });

    // Add input listener for manual expression updates
    validateExpression.addEventListener('input', function() {
        const expression = this.value.trim();
        if (validateCronExpression(expression)) {
            updateDetails(expression);
        } else {
            document.getElementById('validationError').classList.remove('d-none');
            document.getElementById('expressionDetails').style.display = 'none';
        }
    });

    // Copy button functionality
    copyBtn.addEventListener('click', function() {
        const expressionValue = validateExpression.value;
        navigator.clipboard.writeText(expressionValue).then(() => {
            this.innerHTML = '<i class="bi bi-check"></i> Copied!';
            setTimeout(() => {
                this.innerHTML = '<i class="bi bi-clipboard"></i> Copy';
            }, 2000);
        });
    });

    // Initial setup: Set frequency to minutely and interval to 1 minute
    frequencySelect.value = 'minutely';
    document.getElementById('minuteInterval').value = '1';
    
    // Show minutely options and hide others
    document.querySelectorAll('.schedule-options').forEach(el => el.classList.add('d-none'));
    document.getElementById('minutelyOptions').classList.remove('d-none');
    
    // Update schedule with initial values
    updateSchedule();

    // Main update functions
    function updateSchedule() {
        const frequency = frequencySelect.value;
        let expression = '';

        switch(frequency) {
            case 'minutely':
                const mins = document.getElementById('minuteInterval').value;
                expression = mins === '1' ? '* * * * *' : `*/${mins} * * * *`;
                break;

            case 'hourly':
                const hours = document.getElementById('hourInterval').value;
                expression = hours === '1' ? '0 * * * *' : `0 */${hours} * * *`;
                break;

            case 'daily':
                const dailyTime = document.getElementById('dailyTime').value;
                const dailyHour = parseInt(dailyTime);
                expression = `0 ${dailyHour} * * *`;
                break;

            case 'weekly':
                const weeklyTime = document.getElementById('weeklyTime').value;
                const selectedDays = [];
                for (let i = 0; i < 7; i++) {
                    if (document.getElementById(`weekday${i}`).checked) {
                        selectedDays.push(i);
                    }
                }
                if (selectedDays.length === 0) {
                    expression = '0 0 * * *';
                } else {
                    expression = `0 ${weeklyTime} * * ${selectedDays.join(',')}`;
                }
                break;

            case 'monthly':
                const monthlyDay = document.getElementById('monthlyDay').value;
                const monthlyTime = document.getElementById('monthlyTime').value;
                expression = `0 ${monthlyTime} ${monthlyDay} * *`;
                break;
        }

        validateExpression.value = expression;
        updateDetails(expression);
    }

    function updateDetails(expression) {
        const parts = expression.split(' ');
        const fields = ['Minute', 'Hour', 'Day of Month', 'Month', 'Day of Week'];
        
        // Update breakdown table
        document.getElementById('expressionBreakdown').innerHTML = fields.map((field, i) => `
            <tr>
                <td>${field}</td>
                <td><code>${parts[i]}</code></td>
                <td>${getFieldDescription(field, parts[i])}</td>
            </tr>
        `).join('');

        // Update description
        document.getElementById('decodedDescription').textContent = generateHumanReadable(expression);
        
        // Update next occurrences
        const occurrencesList = document.getElementById('decodedOccurrences');
        occurrencesList.innerHTML = '';
        
        try {
            let date = new Date();
            let nextDates = [];
            
            for (let i = 0; i < 5; i++) {
                const nextDate = getNextOccurrence(expression, date);
                if (!nextDate) {
                    throw new Error('Invalid pattern or no occurrences found');
                }
                nextDates.push(nextDate);
                date = new Date(nextDate.getTime() + 60000); // Add 1 minute to find next occurrence
            }

            occurrencesList.innerHTML = nextDates
                .map(date => `<li>${date.toLocaleString()}</li>`)
                .join('');
        } catch (e) {
            console.error('Error calculating occurrences:', e);
            occurrencesList.innerHTML = '<li class="text-danger">Could not calculate next occurrences. Please check your expression.</li>';
        }

        // Show details and hide error
        document.getElementById('expressionDetails').style.display = 'block';
        document.getElementById('validationError').classList.add('d-none');
    }

    function getNextOccurrence(cronExpression, startDate = new Date()) {
        try {
            const [minute, hour, dayOfMonth, month, dayOfWeek] = cronExpression.split(' ');
            let date = new Date(startDate);
            date.setSeconds(0);
            date.setMilliseconds(0);

            function matches(value, field) {
                // Handle asterisk
                if (value === '*') return true;

                // Handle last day of month
                if (value === 'L' && field === 'dayOfMonth') {
                    const lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
                    return date.getDate() === lastDay;
                }

                // Handle steps (*/n)
                if (value.includes('/')) {
                    const [range, step] = value.split('/');
                    const stepNum = parseInt(step);
                    if (isNaN(stepNum)) return false;
                    const fieldValue = getFieldValue(field);
                    return fieldValue % stepNum === 0;
                }

                // Handle ranges (n-m)
                if (value.includes('-')) {
                    const [start, end] = value.split('-').map(Number);
                    if (isNaN(start) || isNaN(end)) return false;
                    const fieldValue = getFieldValue(field);
                    return fieldValue >= start && fieldValue <= end;
                }

                // Handle lists (n,m,p)
                if (value.includes(',')) {
                    const values = value.split(',').map(Number);
                    if (values.some(isNaN)) return false;
                    return values.includes(getFieldValue(field));
                }

                // Handle single number
                const num = parseInt(value);
                if (isNaN(num)) return false;
                return getFieldValue(field) === num;
            }

            function getFieldValue(field) {
                switch(field) {
                    case 'minute': return date.getMinutes();
                    case 'hour': return date.getHours();
                    case 'dayOfMonth': return date.getDate();
                    case 'month': return date.getMonth() + 1;
                    case 'dayOfWeek': return date.getDay();
                    default: return null;
                }
            }

            const maxAttempts = 10000; // Increased max attempts for more complex patterns
            let attempts = 0;

            while (attempts < maxAttempts) {
                // Check if current date matches all parts of the expression
                if (matches(minute, 'minute') &&
                    matches(hour, 'hour') &&
                    matches(dayOfMonth, 'dayOfMonth') &&
                    matches(month, 'month') &&
                    matches(dayOfWeek, 'dayOfWeek')) {
                    return new Date(date);
                }

                // Smart increment: jump by appropriate intervals
                if (!matches(minute, 'minute')) {
                    date.setMinutes(date.getMinutes() + 1);
                } else if (!matches(hour, 'hour')) {
                    date.setHours(date.getHours() + 1);
                    date.setMinutes(0);
                } else if (!matches(dayOfMonth, 'dayOfMonth') || !matches(dayOfWeek, 'dayOfWeek')) {
                    date.setDate(date.getDate() + 1);
                    date.setHours(0);
                    date.setMinutes(0);
                } else if (!matches(month, 'month')) {
                    date.setMonth(date.getMonth() + 1);
                    date.setDate(1);
                    date.setHours(0);
                    date.setMinutes(0);
                }

                attempts++;
            }

            throw new Error('Pattern is too complex or invalid');
        } catch (e) {
            console.error('Error in getNextOccurrence:', e);
            return null;
        }
    }

    // Initialize with default expression
    updateDetails('* * * * *');
});


document.getElementById('validateExpression').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        validateCustomExpression();
    }
});

function validateCustomExpression() {
    const expression = document.getElementById('validateExpression').value.trim();
    const validationResult = document.getElementById('validationResult');
    const validationError = document.getElementById('validationError');
    const breakdownTable = document.getElementById('expressionBreakdown');
    
    validationResult.classList.add('d-none');
    validationError.classList.add('d-none');
    
    if (!validateCronExpression(expression)) {
        validationError.classList.remove('d-none');
        return;
    }

    // Show the expression breakdown
    const parts = expression.split(' ');
    const fields = ['Minute', 'Hour', 'Day of Month', 'Month', 'Day of Week'];
    breakdownTable.innerHTML = fields.map((field, i) => `
        <tr>
            <td>${field}</td>
            <td><code>${parts[i]}</code></td>
            <td>${getFieldDescription(field, parts[i])}</td>
        </tr>
    `).join('');

    // Update description and occurrences
    document.getElementById('decodedDescription').textContent = generateHumanReadable(expression);
    updateDecodedOccurrences(expression);
    validationResult.classList.remove('d-none');
}

function getFieldDescription(field, value) {
    if (value === '*') return 'Every value';
    if (value.includes('/')) {
        const [, step] = value.split('/');
        return `Every ${step} ${field.toLowerCase()}s`;
    }
    if (value.includes('-')) {
        const [start, end] = value.split('-');
        return `From ${formatValue(field, start)} to ${formatValue(field, end)}`;
    }
    if (value.includes(',')) {
        return value.split(',')
            .map(v => formatValue(field, v))
            .join(' and ');
    }
    return formatValue(field, value);
}

function formatValue(field, value) {
    if (field === 'Day of Week') {
        const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
        return days[value] || value;
    }
    if (field === 'Month') {
        const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                      'July', 'August', 'September', 'October', 'November', 'December'];
        return months[value - 1] || value;
    }
    return value;
}

function generateHumanReadable(expression) {
    // Use the existing updateHumanReadable logic but return the string
    const parts = expression.split(' ');
    const minuteDesc = parts[0] === '*' ? 'every minute' : `at minute ${parts[0]}`;
    const hourDesc = parts[1] === '*' ? 'of every hour' : `at ${formatTime(parseInt(parts[1]))}`;
    const dayDesc = parts[2] === '*' ? 'every day' : `on day ${parts[2]}`;
    const monthDesc = parts[3] === '*' ? 'of every month' : `in ${formatValue('Month', parts[3])}`;
    const weekdayDesc = parts[4] === '*' ? '' : ` on ${getWeekdayNames(parts[4])}`;

    return `Runs ${minuteDesc} ${hourDesc} ${dayDesc} ${monthDesc}${weekdayDesc}`;
}

function updateDecodedOccurrences(expression) {
    const occurrencesList = document.getElementById('decodedOccurrences');
    occurrencesList.innerHTML = '';
    let date = new Date();
    let count = 0;

    try {
        while (count < 5) {
            date = getNextOccurrence(expression, date);
            const li = document.createElement('li');
            li.textContent = date.toLocaleString();
            occurrencesList.appendChild(li);
            date = new Date(date.getTime() + 60000);
            count++;
        }
    } catch (e) {
        occurrencesList.innerHTML = '<li class="text-danger">Could not calculate next occurrences</li>';
    }
}

function validateCronExpression(expression) {
    const parts = expression.trim().split(/\s+/);
    if (parts.length !== 5) return false;
    
    const ranges = [
        { min: 0, max: 59 }, // minutes
        { min: 0, max: 23 }, // hours
        { min: 1, max: 31 }, // days
        { min: 1, max: 12 }, // months
        { min: 0, max: 6 }   // weekdays
    ];

    return parts.every((part, i) => {
        // Handle asterisk
        if (part === '*') return true;
        
        // Handle 'L' for last day of month
        if (part === 'L' && i === 2) return true;
        
        // Handle lists (e.g., 1,2,3)
        if (part.includes(',')) {
            return part.split(',').every(v => validateCronValue(v, ranges[i]));
        }

        // Handle ranges (e.g., 1-5)
        if (part.includes('-')) {
            const [start, end] = part.split('-').map(Number);
            return !isNaN(start) && !isNaN(end) &&
                   start >= ranges[i].min && end <= ranges[i].max &&
                   start <= end;
        }

        // Handle steps (e.g., */5)
        if (part.includes('/')) {
            const [range, step] = part.split('/');
            if (range !== '*') return false;
            const stepNum = parseInt(step);
            return !isNaN(stepNum) && stepNum > 0;
        }

        // Handle simple numbers
        const num = parseInt(part);
        return !isNaN(num) && num >= ranges[i].min && num <= ranges[i].max;
    });
}

function validateCronValue(value, range) {
    const num = parseInt(value);
    return !isNaN(num) && num >= range.min && num <= range.max;
}

function getWeekdayNames(weekdays) {
    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    if (weekdays === '1-5') return 'weekdays';
    if (weekdays === '0,6') return 'weekends';
    if (weekdays.includes('-')) {
        const [start, end] = weekdays.split('-').map(Number);
        return `${days[start]} through ${days[end]}`;
    }
    if (weekdays.includes(',')) {
        return weekdays.split(',')
            .map(d => days[parseInt(d)])
            .join(' and ');
    }
    return days[parseInt(weekdays)];
}

function formatTime(hour) {
    if (!hour || isNaN(hour)) return 'midnight';
    hour = parseInt(hour);
    if (hour === 0) return '12:00 AM (midnight)';
    if (hour === 12) return '12:00 PM (noon)';
    if (hour < 12) return `${hour}:00 AM`;
    return `${hour-12}:00 PM`;
}
</script>
</body>
</html>
