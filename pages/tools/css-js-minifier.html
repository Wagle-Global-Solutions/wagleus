<!DOCTYPE html>
<html lang="en">

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1FYJ98BTXG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-1FYJ98BTXG');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2031642574589224"
        crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="canonical" href="https://wagleus.com/pages/tools/css-js-minifier.html" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="google-adsense-account" content="ca-pub-2031642574589224">

    <!-- Additional meta tags for better SEO -->
    <meta name="author" content="Wagle Universal Solutions">
    <meta name="copyright" content="WagleUS">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Free CSS & JavaScript Minifier Tool - Optimize & Compress Code | WagleUS</title>
    <meta name="description"
        content="Free online CSS and JavaScript minifier tool. Reduce file size up to 70%, improve website performance, support bulk minification. Advanced options for JavaScript with variable mangling and dead code removal.">
    <meta name="keywords"
        content="css minifier, javascript minifier, js minifier, code minification, css compression, js compression, web performance, minify code online, code optimization, bulk minifier, terser minification, variable mangling">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://wagleus.com/pages/tools/css-js-minifier.html">
    <meta property="og:title" content="Free CSS & JavaScript Minifier - Code Optimization Tool">
    <meta property="og:description"
        content="Optimize your website performance with our free CSS and JavaScript minifier. Advanced optimization options, bulk processing, and instant compression.">
    <meta property="og:image" content="/assets/img/logo.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://wagleus.com/pages/tools/css-js-minifier.html">
    <meta property="twitter:title" content="CSS & JS Minifier Tool">
    <meta property="twitter:description"
        content="Free tool to minify and optimize CSS and JavaScript code. Improve website performance instantly.">

    <!-- Enhanced Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "CSS & JavaScript Minifier Tool",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "description": "Advanced online tool for minifying CSS and JavaScript code. Features include bulk processing, variable mangling, and code optimization.",
        "browserRequirements": "Requires JavaScript",
        "softwareVersion": "2.0",
        "creator": {
            "@type": "Organization",
            "name": "Wagle Universal Solutions",
            "alternateName": ["WUS", "Wagle", "WagleUS"],
            "url": "https://wagleus.com",
            "sameAs": [
                "https://www.facebook.com/profile.php?id=61558961715001",
                "https://x.com/wagleus",
                "https://www.linkedin.com/company/wagle-universal-solutions"
            ]
        },
        "featureList": [
            "CSS Minification",
            "JavaScript Optimization",
            "Bulk File Processing",
            "Variable Name Mangling",
            "Dead Code Elimination"
        ]
    }
    </script>

    <!-- Breadcrumbs Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://wagleus.com"
      },{
        "@type": "ListItem",
        "position": 2,
        "name": "Tools",
        "item": "https://wagleus.com/pages/tools/tools.html"
      },{
        "@type": "ListItem",
        "position": 3,
        "name": "CSS & JavaScript Minifier",
        "item": "https://wagleus.com/pages/tools/css-js-minifier.html"
      }]
    }
    </script>

    <!-- Favicons -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/favicon/site.webmanifest">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap"
        rel="stylesheet">

    <!-- Vendor CSS Files -->
    <link href="/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="/assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="/assets/vendor/animate.css/animate.min.css" rel="stylesheet">
    <link href="/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Main CSS File -->
    <link href="/assets/css/main.css" rel="stylesheet">
    <link href="/assets/css/style.css" rel="stylesheet">

    <style>
        /* Remove minifier-container style and update styles to use tool-container */
        .analysis-box {
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #007bff;
        }

        .progress-container {
            margin: 20px 0;
            display: none;
        }

        .progress {
            height: 20px;
            border-radius: 10px;
            background-color: #e9ecef;
        }

        .progress-bar {
            background-color: #007bff;
            transition: width 0.3s ease;
        }

        .progress-status {
            text-align: center;
            margin-top: 10px;
            color: #666;
        }
    </style>
    <!-- Add Terser for JavaScript minification -->
    <script src="https://cdn.jsdelivr.net/npm/terser/dist/bundle.min.js"></script>
</head>

<body>
    <!-- Header-->
    <header id="header" class="header fixed-top">
        <div class="container-fluid d-flex align-items-center justify-content-between">
            <a href="/pages/tools/tools.html" class="logo">
                <img src="/assets/img/logo.png" alt="WUS LOGO">
            </a>

            <nav id="navbar" class="navbar">
                <ul>
                    <li><a href="/pages/tools/tools.html" class="active">All Tools</a></li>
                    <li class="dropdown">
                        <a href="#"><span>Tools Menu</span> <i class="bi bi-chevron-down"></i></a>
                        <ul>
                            <li><a href="/pages/tools/text-manipulation.html">Text Manipulation</a></li>
                            <li><a href="/pages/tools/bulk-image-resizer.html">Bulk Image Resizer</a></li>
                            <li><a href="/pages/tools/json-formatter.html">JSON Formatter</a></li>
                            <li><a href="/pages/tools/password-generator.html">Password Generator</a></li>
                            <li><a href="/pages/tools/number-converter.html">Number Converter</a></li>
                            <li><a href="/pages/tools/base64encoder-decoder.html">Base64 Encoder</a></li>
                            <li><a href="/pages/tools/hash-generator.html">Hash Generator</a></li>
                            <li><a href="/pages/tools/color-picker.html">Color Theory</a></li>
                            <li><a href="/pages/tools/cron-expression-generator.html">Cron Generator</a></li>
                            <li><a href="/pages/tools/css-js-minifier.html">CSS & JS Minifier</a></li>
                        </ul>
                    </li>
                    <li><a href="/index.html"><i class="bi bi-house-door"></i> Home</a></li>
                </ul>
                <i class="bi bi-list mobile-nav-toggle"></i>
            </nav>
        </div>
    </header>

    <!-- Add backdrop div after header -->
    <div class="nav-backdrop"></div>

    <main class="main">
        <div class="tool-container">
            <h1 class="text-center mb-4">CSS & JavaScript Minifier</h1>
            <p class="tool-description text-center">
                Minify your CSS and JavaScript code to improve website performance. Reduce file size without affecting
                functionality.
            </p>

            <!-- Warning Box -->
            <div class="warning-box">
                <p class="mb-0">
                    <strong>Help Us Improve!</strong> Found a bug or have suggestions? Connect with us on
                    <a href="https://x.com/wagleus" target="_blank">X (Twitter)</a> or
                    <a href="https://www.linkedin.com/company/wagle-universal-solutions" target="_blank">LinkedIn</a>.
                </p>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-navigation">
                <button class="tab-button active" data-tab="paste">Paste Code</button>
                <button class="tab-button" data-tab="upload">Upload Files</button>
            </div>

            <!-- Paste Code Section -->
            <div class="tab-content active" id="paste-section">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <select class="form-select" id="codeType">
                            <option value="css">CSS</option>
                            <option value="js">JavaScript</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <textarea class="form-control mb-3" id="sourceCode" rows="10"
                            placeholder="Paste your CSS or JavaScript code here..."></textarea>
                        <button class="btn btn-primary" id="minifyBtn">Minify Code</button>
                    </div>
                </div>

                <div class="options-panel mb-3">
                    <h5>Optimization Options</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="option-group">
                                <label class="form-check">
                                    <input type="checkbox" class="form-check-input" id="optMangle" checked>
                                    Mangle Variables
                                </label>
                            </div>
                            <div class="option-group">
                                <label class="form-check">
                                    <input type="checkbox" class="form-check-input" id="optCompress" checked>
                                    Compress Code
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="option-group">
                                <label class="form-check">
                                    <input type="checkbox" class="form-check-input" id="optDropConsole" checked>
                                    Remove Console Statements
                                </label>
                            </div>
                            <div class="option-group">
                                <label class="form-check">
                                    <input type="checkbox" class="form-check-input" id="optDropDebugger">
                                    Remove Debugger Statements
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="stats-box d-none" id="statsBox">
                    <div class="stats-item">Original Size: <span id="originalSize">0</span> KB</div>
                    <div class="stats-item">Minified Size: <span id="minifiedSize">0</span> KB</div>
                    <div class="stats-item">Savings: <span id="savings" class="savings">0%</span></div>
                </div>

                <div class="result position-relative d-none" id="resultBox">
                    <pre id="minifiedCode" class="preview-content"></pre>
                    <button class="copy-btn" id="copyBtn">
                        <i class="bi bi-clipboard"></i> Copy
                    </button>
                </div>
            </div>

            <!-- Upload Files Section -->
            <div class="tab-content" id="upload-section">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <select class="form-select" id="uploadCodeType">
                            <option value="css">CSS</option>
                            <option value="js">JavaScript</option>
                        </select>
                    </div>
                </div>

                <div class="options-panel mb-3 d-none" id="uploadOptionsPanel">
                    <h5>JavaScript Optimization Options</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="option-group">
                                <label class="form-check">
                                    <input type="checkbox" class="form-check-input" id="uploadOptMangle" checked>
                                    Mangle Variables
                                </label>
                            </div>
                            <div class="option-group">
                                <label class="form-check">
                                    <input type="checkbox" class="form-check-input" id="uploadOptCompress" checked>
                                    Compress Code
                                </label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="option-group">
                                <label class="form-check">
                                    <input type="checkbox" class="form-check-input" id="uploadOptDropConsole" checked>
                                    Remove Console Statements
                                </label>
                            </div>
                            <div class="option-group">
                                <label class="form-check">
                                    <input type="checkbox" class="form-check-input" id="uploadOptDropDebugger">
                                    Remove Debugger Statements
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="file-drop-zone" id="dropZone">
                    <i class="bi bi-cloud-upload"></i>
                    <p>Drag & drop CSS or JavaScript files here</p>
                    <p class="drag-text">or click to select files</p>
                    <input type="file" id="fileInput" multiple accept=".css,.js" class="d-none">
                </div>

                <div class="progress-container" id="progressContainer">
                    <div class="progress">
                        <div class="progress-bar" role="progressbar" style="width: 0%" id="progressBar"></div>
                    </div>
                    <div class="progress-status" id="progressStatus">Processing files: 0/0</div>
                </div>

                <div id="fileList" class="mt-4"></div>

                <button class="btn btn-primary d-none mt-3" id="minifyAllBtn">
                    Minify & Download All
                </button>
            </div>

            <!-- Add FAQ Section before documentation -->
            <div class="faq-section mt-5">
                <h2 class="text-center mb-4">Frequently Asked Questions</h2>
                <div class="accordion" id="faqAccordion">
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                data-bs-target="#faq1">
                                What is CSS and JavaScript minification?
                            </button>
                        </h3>
                        <div id="faq1" class="accordion-collapse collapse show">
                            <div class="accordion-body">
                                Minification is the process of reducing code file size by removing unnecessary
                                characters like whitespace, newlines, comments, and shortening variable names, without
                                changing functionality. This results in faster loading websites and better performance.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#faq2">
                                Is it safe to minify JavaScript code?
                            </button>
                        </h3>
                        <div id="faq2" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                Yes, when done correctly, minification is safe and is considered best practice for
                                production code. However, you should always keep the original unminified files for
                                development and debugging purposes. Our tool uses industry-standard Terser for
                                JavaScript minification.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#faq3">
                                How does minification improve website performance?
                            </button>
                        </h3>
                        <div id="faq3" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                Minification reduces the size of CSS and JavaScript files, which means they load faster.
                                This leads to quicker page load times, reduced bandwidth usage, and an overall better
                                user experience.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#faq4">
                                Can I revert minified code back to its original form?
                            </button>
                        </h3>
                        <div id="faq4" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                No, minification is a one-way process. Once code is minified, it cannot be reverted back
                                to its original form. This is why it's important to keep the original, unminified files
                                for development and debugging purposes.
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h3 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#faq5">
                                What are the best practices for minifying code?
                            </button>
                        </h3>
                        <div id="faq5" class="accordion-collapse collapse">
                            <div class="accordion-body">
                                Best practices for minifying code include keeping original, unminified files for
                                development, using source maps in development environments, testing minified code
                                thoroughly before deployment, implementing proper error handling for minified code, and
                                using version control to track changes in original code.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Documentation Section -->
            <div class="documentation">
                <h2>Understanding CSS and JavaScript Minification</h2>

                <h3>What is Minification?</h3>
                <p>Minification is the process of reducing the size of code files by removing unnecessary characters
                    without changing functionality. This includes removing:</p>
                <ul>
                    <li>Comments and formatting</li>
                    <li>Unused code</li>
                    <li>Shortening variable names</li>
                    <li>Combining multiple files</li>
                </ul>

                <h3>CSS Minification Techniques</h3>
                <p>CSS minification typically involves:</p>
                <div class="code-example">
                    <p>Original CSS:</p>
                    <pre>
.button {
    background-color: #007bff;
    padding: 10px 20px;
    /* Button styles */
    margin: 10px;
}
                </pre>
                    <p>Minified CSS:</p>
                    <pre>.button{background-color:#007bff;padding:10px 20px;margin:10px}</pre>
                </div>

                <h3>JavaScript Minification and Optimization</h3>
                <p>JavaScript minification is more complex and includes:</p>
                <ul>
                    <li><strong>Variable Mangling:</strong> Shortening variable names to reduce file size</li>
                    <li><strong>Dead Code Elimination:</strong> Removing unused functions and variables</li>
                    <li><strong>Code Optimization:</strong> Simplifying expressions and combining declarations</li>
                </ul>

                <div class="code-example">
                    <p>Original JavaScript:</p>
                    <pre>
function calculateTotal(price, quantity) {
    // Calculate total price
    var total = price * quantity;
    return total;
}
                </pre>
                    <p>Minified JavaScript:</p>
                    <pre>function c(p,q){return p*q}</pre>
                </div>

                <h3>Benefits of Minification</h3>
                <ul>
                    <li><strong>Faster Loading:</strong> Reduced file size means faster page loads</li>
                    <li><strong>Lower Bandwidth:</strong> Smaller files consume less bandwidth</li>
                    <li><strong>Better User Experience:</strong> Quicker page loads improve user satisfaction</li>
                    <li><strong>SEO Benefits:</strong> Page speed is a ranking factor for search engines</li>
                </ul>

                <h3>Best Practices</h3>
                <ol>
                    <li>Always keep original, unminified files for development</li>
                    <li>Use source maps in development environments</li>
                    <li>Test minified code thoroughly before deployment</li>
                    <li>Implement proper error handling for minified code</li>
                    <li>Use version control to track changes in original code</li>
                </ol>

                <h3>Common Pitfalls to Avoid</h3>
                <ul>
                    <li>Minifying already minified code</li>
                    <li>Not testing minified code in multiple browsers</li>
                    <li>Ignoring source maps in development</li>
                    <li>Over-optimization leading to bugs</li>
                </ul>
            </div>
        </div>
    </main>

    <!-- Add Footer -->
    <footer id="footer" class="footer dark-background">
        <div class="container text-center">
            <h3 class="sitename">Wagle Universal Solutions</h3>
            <p>Contact us today to learn how we can help you achieve your goals.</p>
            <div class="social-links d-flex justify-content-center">
                <a href="https://www.facebook.com/profile.php?id=61558961715001" target="_blank" class="facebook"><i
                        class="bi bi-facebook"></i></a>
                <a href="https://x.com/wagleus" class="twitter-x" target="_blank"><i class="bi bi-twitter-x"></i></a>
                <a href="https://www.linkedin.com/company/wagle-universal-solutions/ " target="_blank"
                    class="linkedin"><i class="bi bi-linkedin"></i></a>
            </div>
            <div class="copyright mt-4">
                <span>Copyright</span> <strong class="px-1 sitename">WUS</strong> <span>All Rights Reserved</span>
                <div class="mt-2">
                    <a href="../terms-of-service.html" class="text-white">Terms of Service</a>
                </div>
            </div>
            <div class="credits">
                Designed by <a>WUS</a> | <a href="/pages/privacy.html">Privacy Policy</a>
            </div>
        </div>
    </footer>

    <!-- Scroll Top -->
    <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
        <i class="bi bi-arrow-up-short"></i>
    </a>

    <!-- Vendor JS Files -->
    <script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/vendor/aos/aos.js"></script>
    <script src="/assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="/assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/terser/dist/bundle.min.js"></script>

    <!-- Main JS File -->
    <script src="/assets/js/index.js"></script>
    <script src="/assets/js/main.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Tab switching
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', () => {
                    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    button.classList.add('active');
                    document.getElementById(button.dataset.tab + '-section').classList.add('active');
                });
            });

            // Single file minification
            const minifyBtn = document.getElementById('minifyBtn');
            const copyBtn = document.getElementById('copyBtn');
            const sourceCode = document.getElementById('sourceCode');
            const minifiedCode = document.getElementById('minifiedCode');
            const resultBox = document.getElementById('resultBox');
            const statsBox = document.getElementById('statsBox');

            // Add getByteSize function
            function getByteSize(str) {
                return new TextEncoder().encode(str).length;
            }

            async function minifyCode(code, type) {
                if (type === 'css') {
                    // Enhanced CSS minification
                    return code
                        .replace(/\/\*[\s\S]*?\*\/|\/\/.*/g, '')
                        .replace(/\s+/g, ' ')
                        .replace(/\s*([\{\}\:\;\,])\s*/g, '$1')
                        .replace(/;\}/g, '}')
                        .replace(/\s*([>~+])\s*/g, '$1')
                        .replace(/\s*(!important)/g, '$1')
                        .replace(/\s+{/g, '{')
                        .replace(/;}$/g, '}')
                        .trim();
                } else {
                    // Enhanced JS minification using Terser
                    try {
                        const options = {
                            mangle: document.getElementById('optMangle').checked,
                            compress: document.getElementById('optCompress').checked ? {
                                drop_console: document.getElementById('optDropConsole').checked,
                                drop_debugger: document.getElementById('optDropDebugger').checked,
                                unsafe: true,
                                unsafe_math: true,
                                dead_code: true,
                                evaluate: true,
                                unused: true,
                                if_return: true,
                                join_vars: true,
                                reduce_vars: true
                            } : false,
                            output: {
                                beautify: false,
                                comments: false
                            }
                        };

                        // Perform analysis before minification
                        const analysis = analyzeCode(code);
                        displayAnalysis(analysis);

                        // Use minify method from Terser
                        const result = await window.Terser.minify({ "file.js": code }, options);

                        if (result.error) {
                            throw new Error(result.error);
                        }

                        return result.code;
                    } catch (e) {
                        console.error('Advanced minification failed:', e);
                        showError(e.message);
                        return basicMinify(code);
                    }
                }
            }

            // Update minifyBtn event listener to handle async minification
            minifyBtn.addEventListener('click', async () => {
                const code = sourceCode.value;
                if (!code.trim()) return;

                const minified = await minifyCode(code, document.getElementById('codeType').value);
                minifiedCode.textContent = minified;
                resultBox.classList.remove('d-none');

                const originalSize = getByteSize(code);
                const minifiedSize = getByteSize(minified);
                const savings = ((originalSize - minifiedSize) / originalSize * 100).toFixed(1);

                document.getElementById('originalSize').textContent = (originalSize / 1024).toFixed(2);
                document.getElementById('minifiedSize').textContent = (minifiedSize / 1024).toFixed(2);
                document.getElementById('savings').textContent = savings + '%';
                statsBox.classList.remove('d-none');
            });

            copyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(minifiedCode.textContent);
                copyBtn.innerHTML = '<i class="bi bi-check"></i> Copied';
                setTimeout(() => {
                    copyBtn.innerHTML = '<i class="bi bi-clipboard"></i> Copy';
                }, 2000);
            });

            // File upload handling
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');
            const fileList = document.getElementById('fileList');
            const minifyAllBtn = document.getElementById('minifyAllBtn');
            let files = [];

            dropZone.addEventListener('click', () => fileInput.click());

            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('dragover');
            });

            dropZone.addEventListener('dragleave', () => {
                dropZone.classList.remove('dragover');
            });

            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('dragover');
                handleFiles(e.dataTransfer.files);
            });

            fileInput.addEventListener('change', (e) => {
                handleFiles(e.target.files);
            });

            function handleFiles(fileList) {
                for (let file of fileList) {
                    if (file.type === 'text/css' || file.type === 'text/javascript' ||
                        file.name.endsWith('.css') || file.name.endsWith('.js')) {
                        files.push(file);
                    }
                }
                updateFileList();
            }

            function updateFileList() {
                fileList.innerHTML = '';
                files.forEach((file, index) => {
                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'file-preview';
                    fileDiv.innerHTML = `
                    <div class="d-flex justify-content-between align-items-center">
                        <span>${file.name}</span>
                        <button class="btn btn-sm btn-danger" onclick="removeFile(${index})">
                            <i class="bi bi-trash"></i>
                        </button>
                    </div>
                `;
                    fileList.appendChild(fileDiv);
                });
                minifyAllBtn.classList.toggle('d-none', files.length === 0);
            }

            window.removeFile = (index) => {
                files.splice(index, 1);
                updateFileList();
            };

            // Add type change handlers
            const codeType = document.getElementById('codeType');
            const uploadCodeType = document.getElementById('uploadCodeType');
            const optionsPanel = document.querySelector('.options-panel');
            const uploadOptionsPanel = document.getElementById('uploadOptionsPanel');

            function toggleOptionsPanel(type, panel) {
                if (type === 'js') {
                    panel.classList.remove('d-none');
                } else {
                    panel.classList.add('d-none');
                }
            }

            codeType.addEventListener('change', () => {
                toggleOptionsPanel(codeType.value, optionsPanel);
            });

            uploadCodeType.addEventListener('change', () => {
                toggleOptionsPanel(uploadCodeType.value, uploadOptionsPanel);
            });

            // Initialize panels
            toggleOptionsPanel(codeType.value, optionsPanel);
            toggleOptionsPanel(uploadCodeType.value, uploadOptionsPanel);

            // Update minifyAllBtn to handle bulk minification with progress
            minifyAllBtn.addEventListener('click', async () => {
                const zip = new JSZip();
                const progressContainer = document.getElementById('progressContainer');
                const progressBar = document.getElementById('progressBar');
                const progressStatus = document.getElementById('progressStatus');

                progressContainer.style.display = 'block';
                progressBar.style.width = '0%';
                progressStatus.textContent = `Processing files: 0/${files.length}`;

                try {
                    for (let i = 0; i < files.length; i++) {
                        const file = files[i];
                        const content = await file.text();
                        const type = uploadCodeType.value;

                        let minified;
                        if (type === 'js') {
                            // Use JS optimization options for all JS files
                            const options = {
                                mangle: document.getElementById('uploadOptMangle').checked,
                                compress: document.getElementById('uploadOptCompress').checked ? {
                                    drop_console: document.getElementById('uploadOptDropConsole').checked,
                                    drop_debugger: document.getElementById('uploadOptDropDebugger').checked,
                                    unsafe: true,
                                    unsafe_math: true,
                                    dead_code: true,
                                    evaluate: true,
                                    unused: true,
                                    if_return: true,
                                    join_vars: true,
                                    reduce_vars: true
                                } : false,
                                output: {
                                    beautify: false,
                                    comments: false
                                }
                            };

                            const result = await window.Terser.minify({ "file.js": content }, options);
                            minified = result.code;
                        } else {
                            minified = basicMinify(content);
                        }

                        const filename = file.name.replace(/\.(js|css)$/, '.min.$1');
                        zip.file(filename, minified);

                        // Update progress
                        const progress = ((i + 1) / files.length * 100).toFixed(0);
                        progressBar.style.width = `${progress}%`;
                        progressStatus.textContent = `Processing files: ${i + 1}/${files.length}`;
                    }

                    const blob = await zip.generateAsync({ type: 'blob' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'minified-files.zip';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                } catch (error) {
                    showError(error.message);
                } finally {
                    progressContainer.style.display = 'none';
                }
            });

            function analyzeCode(code) {
                const analysis = {
                    variables: 0,
                    functions: 0,
                    loops: 0,
                    conditionals: 0
                };

                // Count variables
                const varMatches = code.match(/\b(?:var|let|const)\s+[a-zA-Z_$]/g) || [];
                analysis.variables = varMatches.length;

                // Count functions
                const funcMatches = code.match(/\bfunction\s+[a-zA-Z_$]|\b=>\s*{/g) || [];
                analysis.functions = funcMatches.length;

                // Count loops
                const loopMatches = code.match(/\b(?:for|while|do)\b/g) || [];
                analysis.loops = loopMatches.length;

                // Count conditionals
                const condMatches = code.match(/\b(?:if|else|switch|case)\b/g) || [];
                analysis.conditionals = condMatches.length;

                return analysis;
            }

            function displayAnalysis(analysis) {
                // Remove existing analysis box if present
                const existingAnalysis = document.querySelector('.analysis-box');
                if (existingAnalysis) {
                    existingAnalysis.remove();
                }

                const analysisHtml = `
                <div class="analysis-box">
                    <h6>Code Analysis</h6>
                    <div class="row">
                        <div class="col-6 col-md-3">Variables: ${analysis.variables}</div>
                        <div class="col-6 col-md-3">Functions: ${analysis.functions}</div>
                        <div class="col-6 col-md-3">Loops: ${analysis.loops}</div>
                        <div class="col-6 col-md-3">Conditionals: ${analysis.conditionals}</div>
                    </div>
                </div>
            `;

                const statsBox = document.getElementById('statsBox');
                statsBox.insertAdjacentHTML('beforebegin', analysisHtml);
            }

            function showError(message) {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'alert alert-danger';
                errorDiv.textContent = `Minification Error: ${message}`;
                document.getElementById('resultBox').insertAdjacentElement('beforebegin', errorDiv);
                setTimeout(() => errorDiv.remove(), 5000);
            }

            function basicMinify(code) {
                return code
                    .replace(/\/\*[\s\S]*?\*\/|\/\/.*/g, '')
                    .replace(/\s+/g, ' ')
                    .replace(/\s*{\s*/g, '{')
                    .replace(/\s*}\s*/g, '}')
                    .replace(/\s*;\s*/g, ';')
                    .trim();
            }
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</body>

</html>